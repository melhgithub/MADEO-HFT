@using EntityLayer.Concrete
@using System.Text
@using System.Net
@using Microsoft.AspNetCore.Html
@model HomePageViewModel
@{
    ViewData["Title"] = "Home";
}
@foreach (var homepage in Model.HomePage)
{
    <div class="containerr">
        <div class="row">
            <div id="carouselExampleIndicators" class="carousel slider ilkcarousel" data-rider="carousel">
                <ol class="carousel-indicator">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    @foreach (var banners in Model.Banners)
                    {
                        @if (!string.IsNullOrEmpty(banners.Banner1))
                        {
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        }
                        @if (!string.IsNullOrEmpty(banners.Banner2))
                        {
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        }
                        @if (!string.IsNullOrEmpty(banners.Banner3))
                        {
                            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                        }
                    }
                </ol>
                <div class="carousel-inner" role="listbox">
                    @foreach (var banners in Model.Banners)
                    {
                        <div class="carousel-item active" style="url('~/Resimler/@banners.Banner1');">
                            <div class="carousel-caption">
                            </div>
                            <img src="~/Resimler/@banners.Banner1" class="d-block w-100" alt="Banner1" />
                        </div>
                        @if (!string.IsNullOrEmpty(banners.Banner2))
                        {
                            <div class="carousel-item" style="url('~/Resimler/@banners.Banner2');">
                                <div class="carousel-caption">
                                </div>
                                <img src="~/Resimler/@banners.Banner2" class="d-block w-100" alt="Banner2" />
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(banners.Banner3))
                        {
                            <div class="carousel-item" style="url('~/Resimler/@banners.Banner3');">
                                <div class="carousel-caption">
                                </div>
                                <img src="~/Resimler/@banners.Banner3" class="d-block w-100" alt="Banner3" />
                            </div>
                        }
                    }
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Prev.</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <br />
            <div class="col-md-6 anasayfailkyazi">
                <h2 class="HomePageTitle text-center">@homepage.Title</h2>
                <h4 class="HomePageText word-wrap" style="word-wrap: break-word;">@Html.Raw(@homepage.Text1)</h4>

            </div>
            <div class="col-md-6 anasayfacarouselicinstyle">
                <div id="carouselExampleControls" class="carousel slide ikicarousel" data-ride="carousel">
                    <div class="carousel-inner ikicarouselinner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" src="~/Resimler/@homepage.Image1" alt="First slide">
                        </div>
                        @if (!string.IsNullOrEmpty(homepage.Image2))
                        {
                            <div class="carousel-item">
                                <img class="d-block w-100" src="~/Resimler/@homepage.Image2" alt="Second slide">
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(homepage.Image3))
                        {
                            <div class="carousel-item">
                                <img class="d-block w-100" src="~/Resimler/@homepage.Image3" alt="Third slide">
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(homepage.Image4))
                        {
                            <div class="carousel-item">
                                <img class="d-block w-100" src="~/Resimler/@homepage.Image4" alt="Fourth slide">
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(homepage.Image5))
                        {
                            <div class="carousel-item">
                                <img class="d-block w-100" src="~/Resimler/@homepage.Image5" alt="Fifth slide">
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 anasayfaikiyazi">
                <h2 class="HomePageTitle text-center">@homepage.Title2</h2>
                <form id="AdminForm" class="p-4 bg-light rounded shadow-sm" method="post" action="/AdminForm/AddEditRequest">
                    <div class="form-group">
                        <label for="Name">Name :</label>
                        <input type="text" class="form-control" id="Name" name="Name" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label for="Mail">Email address :</label>
                        <input type="email" class="form-control" id="Mail" name="Mail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="Message">Request please :</label>
                        <textarea class="form-control" id="Message" name="Message" rows="3" placeholder="Enter your request please" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block mt-4">Submit</button>
                </form>
                <div class="modal fade" id="responseModal" tabindex="-1" aria-labelledby="responseModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="responseModalLabel">Form Response</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p id="responseMessage"></p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <iframe width="420" height="420"
                        src="@homepage.VideoLink" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
                </iframe>

            </div>
        </div>
    </div>

}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#AdminForm').on('submit', function (event) {
            event.preventDefault();

            $.ajax({
                url: '/AdminForm/AddEditRequest',
                type: 'POST',
                data: $(this).serialize(),
                success: function (response) {
                    $('#responseMessage').text(response.message);

                    $('#responseModal').modal('show');

                    setTimeout(function () {
                        $('#responseModal').modal('hide');
                    }, 1000);
                },
                error: function () {
                    $('#responseMessage').text('An error occurred. Please try again.');
                    $('#responseModal').modal('show');

                    setTimeout(function () {
                        $('#responseModal').modal('hide');
                    }, 2000);

                }
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(function () {
            const form = document.getElementById('AdminForm');
            form.classList.add('show');

            const formGroups = form.querySelectorAll('.form-group');
            formGroups.forEach((group, index) => {
                setTimeout(() => {
                    group.style.transitionDelay = `${index * 0.3}s`;
                    group.style.opacity = '1';
                    group.style.transform = 'translateX(0)';
                }, index * 300);
            });
        }, 1000);
    });
</script>
